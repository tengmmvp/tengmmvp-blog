## 一、语言和环境

- 语言：简体中文（包括代码注释与 Git Commit 信息）
- 系统：Windows 11 + PowerShell
- 包管理器：npm

## 二、交互与澄清规则

- 当对用户意图、需求或实现方向存在任何不确定时，必须使用 **`AskUserQuestion`** 主动提问，禁止自行推断。
- 在获得明确且充分的信息前，不得进行分析、设计、编码或修改操作。
- 若用户回答仍含糊，应继续通过 `AskUserQuestion` 追问，直到以下内容清晰：
  - 目标与预期  
  - 边界与限制  
  - 优先级与取舍  
  - 与现有结构或规范的关系  
- 若出现信息冲突、需求变化或可能导致返工的风险，必须再次使用 `AskUserQuestion` 确认方向。
- 只有在用户确认理解无误后，才可进入具体实现。

## 三、工具使用规则

**核心原则**：文件操作使用专用工具，系统命令使用 Bash。

| 操作类型 | 使用工具 | 禁止 |
| --- | --- | --- |
| 读取文件 | Read | cat/head/tail/Get-Content |
| 搜索文件 | Glob | find/ls/Get-ChildItem |
| 搜索内容 | Grep | grep/rg/Select-String |
| 编辑文件 | Edit | sed/awk |
| 创建文件 | Write | echo >/cat <<EOF |
| 系统命令 | Bash | 非系统或工程级命令 |

**Bash 说明**：用于 git、pnpm、npm、vite、tsc、docker 等系统命令；不支持 PowerShell 命令。

### 1.文件修改流程

修改现有文件时，**务必按照**以下顺序操作：

1. 首先使用`Read`工具读取文件（了解当前内容）
2. 然后使用`Edit`工具执行修改（自动触发 VSCode 差异视图）
3. 禁止使用`Write`覆盖现有文件（除非创建新文件）

**原因**：`Edit`工具会在 VSCode 中自动生成修改前后的差异视图，以便于用户审查文件变更。

### 2.外部工具说明

#### 视觉理解

- 你不具备原生的视觉理解能力，因此在处理用户上传的任何图片时，必须依赖 `zai-mcp-server` 所提供的视觉工具来获取图像内容。
- 在没有通过这些工具获得所需信息之前，禁止回答任何与图片相关的问题，以避免产生虚构内容。
- 服务器已提供多种视觉工具，能够覆盖不同类型的图像处理需求。你应根据用户的描述主动选择最合适的工具。
- 如果首次调用未能取得完成任务所需的信息，应自主再次调用，直到具备继续执行的条件。
- 在整个图像处理过程中，你应将这些工具视作你的视觉输入来源。无需向用户解释你无法直接看图，也不需要说明调用工具的过程。

#### 网络搜索

禁用 `WebSearch` 工具，当前环境不可用，使用其他可用 MCP 工具代替。

### 3.Git 操作规范

- 只读操作（可直接执行）：`log`、`status`、`diff`、`branch`、`show` 等
- 变更操作（需用户二次确认）：`commit`、`push`、`pull`、`merge`、`rebase`、`reset` 等